{% extends "header_template.html" %}
{% block content %}
         <h1>Find parking places</h1>
        {% if error %}
        <p class=error><Strong>Error</Strong> {{ error }}
        {% endif %}


              <dl>
                 <dt> Lowest price:
                 <dd><input type="text" name="l_price" id="l_price"  size="20" >
                 <dt>Highest price:
                 <dd><input type="text" name="h_price" id="h_price" size="20" >
                  <br>
                 <button  type="submit" onclick="SendInfo();" >Find!</button>

        
{% if Message %}
        <p class=mess> <h1>Information: </h1></p>
        <dl>
            <dt>
                <b>Lot ID:</b> {{ Message.id_lot }} <br/>
                <b>Place ID:</b> {{ Message.id_place }} <br/>
                <p>Price: {{ Message.cost }}</p>
                <!--   
                <p>Earliest time:  {{ Message.e_time }}</p>
                <p>Latest time:  {{ Message.l_time }}</p> -->
            </dt>
        </dl> 
{% endif %}

<!--<script type="text/javascript" src="https://jquery-json.googlecode.com/files/jquery.json-2.4.js"></script>-->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
    
    // Check if string is a whole number(digits only).
    var isWhole_re  = /^\s*\d+\s*$/;
    function isWhole (s) {
        return String(s).search (isWhole_re) != -1
    };
    
    
    function checkform ( form )
    {
  
  // ** START **
        if (isWhole(form.l_price.value) != true || isWhole(form.h_price.value) != true || form.l_price.value == '' || form.h_price.value == '') {
            alert( "Please enter valid data" );
            form.l_price.focus();
            return false ;
        }
  // ** END **
        return true ;
    };

    SendInfo = function() {
        if (checkform(this)){
        var formData = {
            "l_price":$("#l_price").val(),
            "h_price":$("#h_price").val(),
            };
        console.log(formData);
        $.ajax({
            url:'http://localhost:5000/payment',
            type:'POST',
            data: JSON.stringify(formData),
            contentType: "application/json",
            success: function (request)
            {
            
            },

            error: function (request)
            {
            
            },

            });

    return false;
    };
    return true;
    };


</script>

{% endblock %}